---
title: Stream - Dictation/ Transcription
description: WebSocket Secure (WSS) API Documentation for stateless use of /transcribe endpoint
tag: WSS
---

## Overview

The WebSocket Secure (WSS) API enables real-time, bidirectional communication with the Corti system for stateless speech-to-text. Clients can send and receive structured data, including transcripts and detected voice commands.

This documentation provides a comprehensive guide for integrating these capabilities.

### Environment Options

| Environment | Description |
| :--- | :--- |
| `us` | US-based instance |
| `eu` | EU-based instance |
| `beta-eu` | Beta EU instance (default) |

## Establishing a Connection <Icon icon="circle-wifi" iconType="solid" /> 

Clients must initiate a WebSocket connection using the `wss://` scheme.

<RequestExample>

```bash Handshake
  curl --request GET \
    --url wss://api.${environment}.corti.app/audio-bridge/v2/transcribe?tenant-name=${tenant}&token=Bearer%20${accessToken}
```

</RequestExample>

<ResponseExample>

```jsx Transcript response
      {
  "type": "transcript",
  "data": {
    "text": "Hello.\nHow are you?",
    "rawTranscriptText": "hello new line how are you",
    "start": 0.124,
    "end": 6.421,
    "isFinal": true
  }
}
```

</ResponseExample>


<Note>In addition to the `tenant-name` url parameter, authentication for the WSS requires a `token` url parameter to pass in the Bearer access token.</Note>

### Query Parameters
<ParamField query="tenant-name" type="string" required>
  Specifies the tenant context
</ParamField>
<ParamField query="token" type="string" required>Bearer $token</ParamField>

## Handshake Response

### **101 Switching Protocols** <Icon icon="circle-check" iconType="solid" /> 

Indicates a successful WebSocket connection.
Upon successful connection, send a message including the configuration to specify the input and expected output formats.

## Sending Messages <Icon icon="message-arrow-up" iconType="solid" /> 

Clients must send a stream configuration message and wait for a response of type `CONFIG_ACCEPTED` before transmitting other data.
If the configuration is not valid it will return `CONFIG_DENIED`.
The configuration must be committed within 10 seconds of opening the WebSocket, else it will time-out with `CONFIG_TIMEOUT`.

### Basic Stream Configuration

#### Body

<ParamField body="primaryLanguage" type="string" required>
  The locale of the primary spoken language. Check https://docs.corti.ai/about/languages for more.
</ParamField>
<ParamField body="interimResults" type="bool">
  When true, returns interim results for reduced latency
</ParamField>
<ParamField body="spokenPunctuation" type="bool">
  When true, converts spoken punctuation such as `dot` or `slash` into `.`or `/`.
</ParamField>
<ParamField body="automaticPunctuation" type="bool">
  When true, automatically punctuates and capitalizes in the final transcript.
</ParamField>

### Advanced Stream Configuration: Voice Commands
The transcribe endpoint supports registration and detection of commands, common in front end-dictation workflows.
Extend the configuration with the following parameters to register voice commands that should be detected.

#### Body

<ParamField body="commands" type="command object[]">
  Provide the commands that should be registered and detected
   <Expandable title="properties">
    <ParamField body="id" type="string" required>
      To identify the command when it gets detected and returned over the WebSocket
    </ParamField>
    <ParamField body="phrases" type="string[]">
      The spoken phrases that should trigger the command
    </ParamField>
    <ParamField body="variables" type="string[]">
      The spoken phrases that should trigger the command
    </ParamField>
    <Expandable title="variable properties">
        <ParamField body="key" type="string" required>
          To identify the command when it gets detected and returned over the WebSocket
        </ParamField>
        <ParamField body="type" type="string">
          The spoken phrases that should trigger the command
        </ParamField>
        <ParamField body="enum" type="string[]">
          The spoken phrases that should trigger the command
        </ParamField>
      </Expandable>
  </Expandable>
</ParamField>

Here is an example configuration for transcription of dictated audio in English, with interim results, spoken punctuation and automatic punctuation enabled, and example commands defined.
```jsx Configuration example
{
  primaryLanguage: "en",
  interimResults: true, 
  spokenPunctuation: true, 
  automaticPunctuation: true,
  commands: [
    {
      id: "next_section",
      phrases: ["next section", "go to next section"]
    },
    {
      id: "delete",
      phrases: ["delete that"]
    },
    {
            "id": "insert_template",
            "phrases": [
                "insert my {template_name} template",
                "insert {template_name} template"
            ],
            "variables": [
                {
                    "key": "template_name",
                    "type": "enum",
                    "enum": [
                        "radiology",
                        "referral"
                    ]
                }
            ]
    }
  ],
}
```

### Sending audio <Icon icon="microphone" iconType="solid" /> 
Raw audio data to be transcribed.

### Ending
To end the /transcribe session send a `type: end`. This will signal the server to send any remaining transcript segments and detected commands before ending the session.

## Responses <Icon icon="message-arrow-down" iconType="solid" /> 

#### Configuration
<ResponseField name="type" type="string" required default="CONFIG_ACCEPTED">
  Returned when sending a valid configuration.
</ResponseField>
<ResponseField name="sessionId" type="uuid" required>
  Returned when sending a valid configuration.
</ResponseField>

#### Transcripts
<ResponseField name="type" type="string" required default="transcript">
<ResponseField name="data" type="string" required></ResponseField>
      <Expandable title="data attributes" type="string" required>
        <ResponseField name="text" type="string" required>
          Transcript segment with punctuations applied and command phrases removed
        </ResponseField>
        <ResponseField name="rawTranscriptText" type="string" required>
          The raw transcript without spoken punctuation applied and without command phrases removed
        </ResponseField>
        <ResponseField name="start" type="float64" required>
          Start time of the transcript segment in seconds
        </ResponseField>
        <ResponseField name="end" type="float64" required>
          End time of the transcript segment in seconds
        </ResponseField>
        <ResponseField name="isFinal" type="bool" required>
          If false, then interim transcript result
        </ResponseField>
      </Expandable>
      </ResponseField>


#### Commands
<ResponseField name="type" type="string" required default="command">
<ResponseField name="data" type="string" required></ResponseField>
      <Expandable title="data attributes" type="string" required>
        <ResponseField name="id" type="string" required>
          To identify the command when it gets detected and returned over the WebSocket
        </ResponseField>
        <ResponseField name="variables" type="string[]">
          The variables identified
        </ResponseField>
        <ResponseField name="rawTranscriptText" type="string" required>
          The raw transcript without spoken punctuation applied and without command phrases removed
        </ResponseField>
        <ResponseField name="start" type="float64" required>
          Start time of the transcript segment in seconds
        </ResponseField>
        <ResponseField name="end" type="float64" required>
          End time of the transcript segment in seconds
        </ResponseField>
      </Expandable>
</ResponseField>

```jsx Command response
      {
    "type": "command",
    "data": {
        "id": "insert_template",
        "variables": {
            "template_name": "radiology"
        },
        "rawTranscriptText": "insert my radiology template",
        "start": 2.3,
        "end": 2.9,
        }
      }
```

### Error Responses
<ResponseField name="type" type="string" required>
  Returned when sending an invalid configuration.
  
  Possible errors `CONFIG_DENIED`, `CONFIG_TIMEOUT`
</ResponseField>
<ResponseField name="reason" type="string">
  The reason the configuration is invalid.
</ResponseField>
<ResponseField name="sessionId" type="uuid" required>
  The session ID.
</ResponseField>